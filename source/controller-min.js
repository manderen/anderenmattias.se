$(document).ready(function(){function e(){$("#gameContent").append('<div id="gameTitle">HÄNGA GUBBE</div>\t\t<div id="startButton" class="button">STARTA</div>'),$("#startButton").on("click",function(){n()})}function n(){$("#gameContent").empty(),$("#gameContent").append('<div id="pixHolder"><img id="hangman" src="man.png"></div>'),$("#gameContent").append('<div id="wordHolder"></div>'),$("#gameContent").append('<div id="clueHolder"></div>'),$("#gameContent").append('<div id="guesses">Tidigare chansning:</div>'),$("#gameContent").append('<div id="feedback"></div>'),$("#gameContent").append('<form><input type="text" id="dummy" ></form>'),t();var e=f.length;for(v=0,m=[],i=0;i<e;i++)$("#wordHolder").append('<div class="tile" id=t'+i+"></div>");$("#clueHolder").append("Ledtråd: "+s),$(document).on("keyup",d),$(document).on("click",function(){$("#dummy").focus()}),$("#dummy").focus()}function t(){var e=Math.floor(Math.random()*u.length);f=u[e][0],s=u[e][1],u.splice(e,1),p=f.split("")}function d(e){if(229==e.keyCode&&(e.keyCode=$("#dummy").val().slice($("#dummy").val().length-1,$("#dummy").val().length).toUpperCase().charCodeAt(0)),e.keyCode>64&&e.keyCode<91){var n=!1,t=!1,d=String.fromCharCode(e.keyCode).toLowerCase();for(i=0;i<m.length;i++)d==m[i]&&(t=!0);if(!t){for(m.push(d),i=0;i<p.length;i++)d==p[i]&&(n=!0,$("#t"+i).append(d));n?o():a(d)}}}function o(){var e="";for(i=0;i<f.length;i++)e+=$("#t"+i).text();e==f&&r()}function a(e){v++;var n=v*-75+"px";$("#guesses").append("  "+e),$("#hangman").css("left",n),6==v&&l()}function r(){document.activeElement.blur(),$(document).off("keyup",d),$("#feedback").append("RÄTT!<br><br><div id='replay' class='button'>FORTSÄTT</div>"),$("#replay").on("click",function(){u.length>0?n():c()})}function l(){document.activeElement.blur(),$(document).off("keyup",d),$("#feedback").append("Ajdå!<br> rätt svar: "+f+"<div id='replay' class='button'>CONTINUE</div>"),$("#replay").on("click",function(){u.length>0?n():c()})}function c(){$("#gameContent").empty(),$("#gameContent").append('<div id="finalMessage">Du är bäst, alla ord klarade!</div>')}var u=new Array,p=new Array,m=new Array,f,s,v;$.getJSON("quizbank.json",function(n){for(i=0;i<n.wordlist.length;i++)u[i]=new Array,u[i][0]=n.wordlist[i].word,u[i][1]=n.wordlist[i].clue;e()})});